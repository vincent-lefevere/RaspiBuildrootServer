<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="author" content="Vincent Lefévère">
    <title>Buildroot/Raspberry PI Serveur V2</title>
    <link rel="stylesheet" href="css/xterm.css" />
    <link rel="stylesheet" href="css/buildroot.css" />    
    <script src="js/xterm.js"></script>
    <script src="js/mqttws31.min.js"></script>
    <script src="js/lang.class.js"></script>
    <script src="js/auth.class.js"></script>
    <script src="js/term.class.js"></script>
    <script src="js/prj.class.js"></script>
    <script src="js/settings.class.js"></script>
    <script src="js/admin.class.js"></script>
    <script src="js/backend.class.js"></script>
    <script src="js/graph.class.js"></script>
    <script src="js/spa.class.js"></script>
  </head>
  <body onload="spa=new MySPA();">
    <header>
      <div class="buildroot"></div>
      <div class="enterprise"></div>
      <div class="raspberry"></div>
    </header>
    <div>
      <input id="identDisplay" type="checkbox" checked="checked"/>
      <main id="ident">
        <form onsubmit="return(false);">
          <label for="lang"><span class="fr">Langue :</span><span class="en">Language:</span></label>
          <select id="lang" onchange="spa.langue();">
            <option value="fr">Français</option>
            <option value="en">English</option>
          </select><br/>
          <label for="login"><span class="fr">email :</span><span class="en">your mail:</span></label><input type="text" id="login"/><br/>
          <label for="passwd"><span class="fr">mot de passe :</span><span class="en">password:</span></label><input type="password" id="passwd" onkeydown="spa.checkchangepasswd();" onkeyup="spa.checkchangepasswd();"/><br/><br/>
          <label></label><input class="fr login" type="submit" value="connexion" onclick="spa.login();"/><input class="en login" type="submit" value="login" onclick="spa.login();"/><br/>
          <p style="display:none;"><span class="fr">Mot de passe incorrect.</span><span class="en">Invalid password.</span></p><br/>
          <span class="fr">Pour changer votre mot de passe, indiquez également ci-dessous deux fois le même nouveau mot de passe et cliquez sur le bouton "changer".</span><span class="en">To change your password, also enter the same new password twice below and click on the "change" button.</span><br/><br/>
          <label for="newpasswd"><span class="fr">mot de passe :</span><span class="en">password:</span></label><input type="password" id="newpasswd" onkeydown="spa.checkchangepasswd();" onkeyup="spa.checkchangepasswd();"/><br/>
          <label for="newpasswd2"><span class="fr">mot de passe :</span><span class="en">password:</span></label><input type="password" id="newpasswd2" onkeydown="spa.checkchangepasswd();" onkeyup="spa.checkchangepasswd();"/><br/><br/>
          <label></label><input class="fr changepasswd" type="submit" value="changer" onclick="spa.changepasswd();"/><input class="en changepasswd" type="submit" value="change" onclick="spa.changepasswd();"/><br/>
        </form>
      </main>

      <input id="projectsDisplay" type="checkbox" checked="checked"/>
      <main id="projects">
        <center><img class="prof" src="img/config.png" onclick="spa.adminShow();"/><span class="fr">Bonjour</span><span class="en">Hello</span> <span id="name"></span> <input class="fr" type="button" value="déconnexion" onclick="spa.logout();"><input class="en" type="button" value="logout" onclick="spa.logout();"></center>
        <h2><label for="dpt"><span class="fr">Mes projets</span><span class="en">My projects</span></label></h2>
        <input id="dpt" style="display:none;" type="radio" name="seldpt">      
        <div class="my" id="tag_my"></div>
        <div class="separation"></div>
        <div id="tag_dpt"></div>
        <h2 class="prof">
          <button class="add fr" onclick="spa.addDpt('Titre du nouveau département');"></button>
          <button class="add en" onclick="spa.addDpt('Title of the new department');"></button>
          <label><span class="fr">Créer une nouvelle catégorie de projets</span><span class="en">Create a new project category</span></label>
        </h2>
      </main>

      <input id="settingsDisplay" type="checkbox"/>
      <main id="settings">
        <img src="img/status.png" width="20px" onclick="spa.metshow();"/>
        <span onclick="spa.settingsBack();">X</span>
        <div style="height: 92px;">
          <center><span class="fr">projet n°</span><span class="en">project n°</span> <span id="settings_id"></span></center>
          <p><span class="fr">titre :</span><span class="en">title:</span> <input id="settings_title" type="text" onblur="spa.renPrj(this);" /></p>
          <p><span class="fr">Verrouiller l'accès au projet</span><span class="en">Lock access to the project</span> <input id="settings_lock" type="checkbox" onchange="spa.lock(this);"></p>
        </div>
        <div style="height: 92px;">
          <p class="poweroff">
            <span class="fr">Sélectionnez une version de compilation :</span>
            <span class="en">Select a compilation version:</span>
            <select id="settings_versions" onchange="spa.choiceImage(this);"></select>
          </p>
          <p class="poweron out">
            <span class="fr">Version de compilation :</span>
            <span class="en">Compilation version:</span>
            <input id="settings_version" type="text" value="" readonly />
          </p>
          <p class="prof">
            <span class="fr">Accès expert au projet</span>
            <span class="en">Expert access to the project</span>
            <input id="settings_expert_prof" type="checkbox" onchange="spa.expert(this);">
          </p>
          <p id="settings_expert_student" class="student">
            <span class="fr">Accès expert accordé pour ce projet</span>
            <span class="en">Expert access granted for this project</span>
          </p>
        </div>
        <div style="height: 182px;">
          <p class="fr">Liste des membres du projet</p><p class="en">List of project members</p>
          <form id="settings_members"></form>        
        </div>
        <div style="height: 182px;">
          <p class="poweroff"><input class="fr" type="button" value="Supprimer le projet" onclick="spa.supPrj('Confirmer la suppression du projet.');"><input class="en" type="button" value="Delete project" onclick="spa.supPrj('Confirm deletion of the project.');"></p>
          <p class="poweroff"><input class="fr" type="button" value="Démarrer Machine Virtuelle" onclick="spa.startVM();"><input class="en" type="button" value="Start Virtual Machine" onclick="spa.startVM();"></p>
          <p class="poweron"><input class="fr" type="button" value="Arrêter Machine Virtuelle" onclick="spa.stopVM();"><input class="en" type="button" value="Stop Virtual Machine" onclick="spa.stopVM();"></p>
          <p class="poweron"><input class="fr" type="button" value="Visualiser Machine Virtuelle" onclick="spa.displayVM();"><input class="en" type="button" value="Display Virtual Machine" onclick="spa.displayVM();"></p>
          <p class="poweron"><b><span class="fr">Accès aux fichiers par sftp sur le port n°</span><span class="en">Access to files via sftp on port n°</span> <span id="settings_sftp"></span></b></p>
          <p class="poweron"><input class="fr" type="button" value="Télécharger le projet" onclick="spa.savePrj();"><input class="en" type="button" value="Download the project" onclick="spa.savePrj();"></p>
        </div>
        <div id="gitlog"></div>
      </main>

      <input id="buildrootDisplay" type="checkbox"/>
      <main id="buildroot">
        <img src="img/status.png" width="20px" onclick="spa.metshow();"/>
        <span onclick="spa.buildrootBack();">X</span>
        <div id="terminal"></div>
        <div id="right">
          <input class="fr" type="button" value="revoir la commande précédente" onclick="spa.sendcmd('');"/><input class="en" type="button" value="review previous commands" onclick="spa.sendcmd('');"/><hr/>
          <input type="button" value="make menuconfig" onclick="spa.sendcmd('menuconfig');"/><br/>
          <input type="button" value="make manip_defconfig" onclick="spa.sendcmd('loaddefconfig');"/><br/>
          <input type="button" value="make savedefconfig BR2_DEFCONFIG=..._defconfig" onclick="spa.sendcmd('savedefconfig');"/><br/>
          <input type="button" value="make linux-menuconfig" onclick="spa.sendcmd('linux-menuconfig');"/><br/>
          <input type="button" value="make" onclick="spa.sendcmd('make');"/><br/>
          <input type="button" value="du -s -m target" onclick="spa.sendcmd('du');"/><br/>
          <input type="button" value="make graph-depends" onclick="spa.sendcmd('graph-depends');"/><br/>
          <input type="button" value="make <PACKAGE>-build" onclick="spa.sendcmd('build');"/><br/>
          <input type="button" value="make <PACKAGE>-dirclean" onclick="spa.sendcmd('dirclean');"/><br/>
          <input type="button" value="make clean" onclick="spa.sendcmd('clean');"/><hr class="expert"/>
          <input class="expert" type="button" value="bash" onclick="spa.sendcmd('bash');"/>
        </div>
      </main>

      <input id="adminDisplay" type="checkbox"/>
      <main id="admin">
        <img src="img/status.png" width="20px" onclick="spa.metshow();"/>
        <span onclick="spa.adminBack();">X</span>
        <table><tr><td>
          <form>
            <p><span class="fr">Sélectionnez le fichier csv des utilisateurs à modifier</span><span class="en">Select the csv file of users to be modified</span></p><p><input type="file" id="admin_csv" onchange="spa.loadusers(this);"/></p>
          </form>
        </td><td class="separation"></td><td>
          <form onsubmit="return(false);">
            <p><span class="fr">Renseignez le numéro de la version à installer :</span><span class="en">Enter the number of the version to be installed:</span> <input id="admin_version" type="text" value=""/></p>
            <p><input class="fr" type="submit" value="Ajouter la version indiquée" onclick="spa.adminAdd();" /><input class="en" type="submit" value="Add the indicated version" onclick="spa.adminAdd();" /></p>
            <p id="admin_errorAdd" class="error"><span class="fr">Ajout impossible, car la version existe déjà dans le système !</span><span class="en">Impossible to add, as the version already exists in the system!</span></p>
          </form>
        </td></tr><tr class="separation"></tr><tr><td>
          <form onsubmit="return(false);">
            <p><span class="fr">Choisissez un matériel cible :</span><span class="en">Choose a hardware target:</span> <select id="admin_defconfs" onchange="spa.adminRefresh1();"></select></p>
            <p><span class="fr">Choisissez la version de toolchain à compiler :</span><span class="en">Choose the version of toolchain to make:</span> <select id="admin_versions_for_tc" onchange="spa.adminRefresh5();"></select> <button class="supr fr" type="button" onclick="spa.adminRm('Confirmation de suppression de version de Buildroot');"></button><button class="supr en" type="button" onclick="spa.adminRm('Confirmation of Buildroot version deletion');"></button></p>
            <p id="buttonCreateTC"><input class="fr" type="submit" value="Lancer la création de la toolchain" onclick="spa.adminCompileTC();" /><input class="en" type="submit" value="Start creating the toolchain" onclick="spa.adminCompileTC();" /></p>
          </form>
        </td><td class="separation"></td><td>
          <form onsubmit="return(false);">
            <p><span class="fr">Titre de la liste :</span><span class="en">Title of the list:</span> <input type="text" id="speedup_title" onkeyup="spa.speedupRefresh();"></p>
            <p><span class="fr">Listez les packages à pré-compiler :</span><span class="en">List packages to be pre-compiled:</span><br><textarea style="width: 100%; resize:vertical;" rows="2" id="speedup_pkgs"></textarea></p>
            <p><input class="fr" type="submit" value="Création de la liste de pré-compilation" onclick="spa.speedupAdd();"><input class="en" type="submit" value="Creating the pre-compilation list" onclick="spa.speedupAdd();"></p>
          </form>            
        </td></tr><tr class="separation"></tr><tr><td>
          <form onsubmit="return(false);">
            <p><span class="fr">Choisissez un matériel cible et sa toolchain :</span><span class="en">Choose a hardware target ans its toolchain:</span> <select id="admin_toolchains" onchange="spa.adminRefresh2();"></select> <button class="supr fr" type="button" onclick="spa.adminRmTC('Confirmation de suppression d\'une toolchain');"></button><button class="supr en" type="button" onclick="spa.adminRmTC('Confirmation of deletion of a toolchain');"></button></p>
            <p><span class="fr">Choisissez la version de buildroot :</span><span class="en">Choose the version of buildroot:</span> <select id="admin_versions"></select></p>
            <p><span class="fr">Choisissez une liste de précompilation :</span><span class="en">Select a pre-compilation list:</span> <select id="speedup_list" onchange="spa.adminRefresh3();"></select> <button class="supr fr" type="button" onclick="spa.speedupRm('Confirmation de suppression d\'une liste de pré-compilation');"></button><button class="supr en" type="button" onclick="spa.speedupRm('Confirmation of deletion of a pre-compilation list');"></button></p>
            <p id="buttonCreateIMG"><input class="fr" type="submit" value="Lancer la création de l'image pour les Machines Virtuelles" onclick="spa.adminCompile();" /><input class="en" type="submit" value="Start creating the image for Virtual Machines" onclick="spa.adminCompile();" /></p>
          </form>
        </td><td class="separation"></td><td>
          <form id="tag_img" onsubmit="return(false);">
            <p><span class="fr">Liste des images générées pour les Machines Virtuelles :</span><span class="en">List of images generated for Virtual Machines:</span></p>
          </form>
        </td></tr></table>
      </main>

      <input id="cm" type="checkbox"/>
      <div id="mtlg">
        <span onclick="spa.metunshow();">X</span>
        <div>
          <span><canvas id="graph4" width="360" height="100"></canvas><b><span class="fr">Mémoire utilisée par le projet : </span><span class="en">Memory used by the project: </span><span id="val4">0</span>%</b></span>
          <span><canvas id="graph5" width="360" height="100"></canvas><b><span class="fr">CPU utilisée par le projet : </span><span class="en">CPU used by the project: </span><span id="val5">0</span>%</b></span>
          <span></span>
          <span><canvas id="graph1" width="360" height="100"></canvas><b><span class="fr">Mémoire globalement utilisée : </span><span class="en">Total memory used: </span><span id="val1">0</span>%</b></span>
          <span><canvas id="graph2" width="360" height="100"></canvas><b><span class="fr">SWAP globalement utilisé : </span><span class="en">Total SWAP used: </span><span id="val2">0</span>%</b></span>
          <span><canvas id="graph3" width="360" height="100"></canvas><b><span class="fr">CPU globalement utilisée : </span><span class="en">Total CPU used: </span><span id="val3">0</span>%</b></span>
        </div>
      </div>
    </div>
    <footer>
      <p class="jauge"><span id="jauge"><span class="fr">VM utilisées : </span><span class="en">VM used: </span><progress id="jauge1" max="30" value="0"></progress> <span id="jauge2">0</span>/30</span></p>
      <p class="scroll"><span class="en"><strong>RaspiBuildrootServer</strong> : Server <a href="https://buildroot.org" target="_blank">Buildroot</a> generating images for <a href="https://www.raspberrypi.com" target="_blank">Raspberry Pi</a> by <a href="mailto:vincent.lefevere@junia.com">Vincent Lefévère</a> of <a href="https://www.junia.com" target="_blank">Junia</a> <span style="display:inline-block; transform: rotate(180deg);">&copy;</span> february 2026 (GNU licence)</span>
      <span class="fr"><strong>RaspiBuildrootServer</strong> : Serveur <a href="https://buildroot.org" target="_blank">Buildroot</a> générant des images pour <a href="https://www.raspberrypi.com" target="_blank">Raspberry Pi</a> par <a href="mailto:vincent.lefevere@junia.com">Vincent Lefévère</a> de <a href="https://www.junia.com" target="_blank">Junia</a> <span style="display:inline-block; transform: rotate(180deg);">&copy;</span> février 2026 (licence GNU)</span><p>
    </footer>
    <footer style="display:none;">
      <div id="template_project">
        <p onclick="spa.selectPrj(this);"><span class="fr">projet n°</span><span class="en">project n°</span> <span class="tag_idprj"></span><br/><span class="tag_title"></span><br/><br/><span class="tag_mail"></span></p>
      </div>
      <div id="template_department">
        <input type="hidden"/>        
        <input class="dpt" type="radio" name="seldpt">
        <h2>
          <button class="supr prof fr" onclick="spa.supDpt(this,'Confirmation de suppression de la catégorie de projets');"></button>
          <button class="supr prof en" onclick="spa.supDpt(this,'Confirmation of project category deletion');"></button>
          <label class="tag_dpt_title"></label><hr class="prof option"/>
          <span class="prof option fr">Sélectionnez le fichier prjbr.tar.gz à inclure : <input type="file" onchange="spa.loadexample(this,'Confirmation de dépose du fichier sélectionné');"/> ou demandez en la <input type="button" value="suppression"onclick="spa.delexample(this,'Confirmation de suppression de l\'exemple précédent');"/></span><span class="prof option en">Select the prjbr.tar.gz file to include: <input type="file" onchange="spa.loadexample(this,'Confirmation of selected file upload');"/> or request its <input type="button" value="removal" onclick="spa.delexample(this,'Confirmation of deletion of the previous example');"/></span><br class="prof option"/>
          <span class="prof option fr">Sélectionnez les groupes ayant accès : </span><span class="prof option en">Select the groups with access: </span><select class="prof option tag_select_group" multiple size="1" onchange="spa.grpDpt(this)"></select>
        </h2>
        <div class="dpt"></div>
        <p class="addprj fr" onclick="spa.addPrj(this,'Titre du nouveau projet');"><span>créer nouveau projet</span></p>
        <p class="addprj en" onclick="spa.addPrj(this,'Title of the new project');"><span>create new project</span></p>
        <div class="separation"></div>
      </div>
      <div id="template_member">
        <button class="valid" type="button" onclick="spa.enroll(this);"></button>
        <button class="supr" type="button" onclick="spa.unenroll(this);"></button>
        <input type="text" value="" readonly/>
        <input class="blink" type="text" value="" readonly/>
      </div>
      <div id="template_gitlog">
        <input type="hidden" value=""/>
        <img src="img/rollback.png" width="20px" onclick="spa.rollback(this);" />
      </div>
      <div id="template_image">
        <input type="hidden"><input type="text" readonly /><span><button class="supr fr" type="button" onclick="spa.adminRmImg(this,'Confirmation de suppression d\'une image de Machine Virtuelle');"></button><button class="supr en" type="button" onclick="spa.adminRmImg(this,'Confirmation of deletion of a Virtual Machine image');"></button></span>
      </div>
    </footer>
  </body>
</html>
